<ion-header>
    <ion-toolbar>
        <ion-buttons slot="secondary">
            <ion-button (click)="baseData.utilFn.goBack()">
                <i class="iconfont iconfanhui"></i>
                <ion-label class="global-back-text">返回</ion-label>
            </ion-button>
        </ion-buttons>

        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>

        <ion-title>
            {{goinType.actionType+goinType.pageType}}
        </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content padding class="detail-content">
    <ion-list>
        <div class="form-group" *ngIf='goinType.pageType=="岗位" && goinType.actionType=="添加"'>
            <label for="inputEmail3" class="col-sm-2 control-label">部门</label>
            <div class="col-sm-10">
                <select class="form-control" [(ngModel)]="currentDepartment.parent_id">
                    <option value="0">选择部门</option>
                    <option style="white-space: pre-wrap;" *ngFor="let item of departmentList" [value]="item.id">
                        {{item.name}}
                    </option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">{{goinType.pageType}}</label>
            <div class="col-sm-10">
                <input
                    type="text"
                    class="form-control"
                    required
                    #dep="ngModel"
                    name="#dep"
                    [(ngModel)]="currentDepartment.name"
                    placeholder="请输入{{goinType.pageType}}"
                />
                <div [hidden]="dep.pristine || dep.valid" class="showerr alert-danger">请输入{{goinType.pageType}}</div>
            </div>
        </div>

        <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label">{{goinType.pageType}}描述</label>
            <div class="col-sm-10">
                <input
                    type="text"
                    class="form-control"
                    id="inputPassword3"
                    #description="ngModel"
                    [(ngModel)]="currentDepartment.description"
                    name="#description"
                    required
                    placeholder="请输入{{goinType.pageType}}描述"
                />
                <div [hidden]="description.pristine || description.valid" class="showerr alert-danger">
                    请输入{{goinType.pageType}}描述
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-2"></div>
            <div class="col-sm-10">
                <ion-button
                    size="small"
                    mode="md"
                    class="mr-15"
                    (click)="submit()"
                    [disabled]='!dep.valid || !description.valid || (goinType.pageType=="岗位" && goinType.actionType=="添加" && currentDepartment.parent_id==0)'
                >
                    确定
                </ion-button>
                <ion-button size="small" mode="md" color="light" (click)="baseData.utilFn.goBack()">返回</ion-button>
            </div>
        </div>
    </ion-list>
</ion-content>
